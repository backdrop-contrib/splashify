jQuery(document).ready(function($){var jsmode=Drupal.settings.splashify.js_mode;if(jsmode=='redirect'){hidepage()}var now=new Date();var nowtimeSeconds=now.getTime()/1000;var referrer=document.referrer+'';var hostname=window.location.hostname+'';var splash=$.jStorage.get("splash",0);var splashalways=Drupal.settings.splashify.js_splash_always;var what_urls=Drupal.settings.splashify.js_mode_settings.urls;var referrer_check=Drupal.settings.splashify.js_disable_referrer_check;var js_mode_settings=Drupal.settings.splashify.js_mode_settings;if(referrer.indexOf('?')!=-1){referrer=referrer.substr(0,referrer.indexOf('?'))}if((referrer.search(hostname)!=-1&&!referrer_check)||jQuery.inArray(window.location.pathname,what_urls)>-1){showpage();return}var displaysplash=false;if(!splash||splash<nowtimeSeconds||splashalways=='1'){displaysplash=true}if(displaysplash){var expireAfter=Drupal.settings.splashify.js_expire_after;var last_url=$.jStorage.get('splashlasturl','');var url='';$.jStorage.set("splash",nowtimeSeconds+expireAfter);if(Drupal.settings.splashify.js_mode_settings.system_splash!=''){url=Drupal.settings.splashify.js_mode_settings.system_splash}else if(Drupal.settings.splashify.js_mode_settings.mode=='sequence'){var new_url_index=0;var last_url_index=jQuery.inArray(last_url,what_urls);if(last_url_index>-1&&last_url_index+1<Drupal.settings.splashify.js_mode_settings.total_urls){new_url_index=last_url_index+1}url=what_urls[new_url_index]}else if(Drupal.settings.splashify.js_mode_settings.mode=='random'){var new_url_index=Math.floor(Math.random()*Drupal.settings.splashify.js_mode_settings.total_urls);url=what_urls[new_url_index]}$.jStorage.set('splashlasturl',url);function open_splash(){if(jsmode=='redirect'){window.location.replace(url)}else if(jsmode=='colorbox'){$.colorbox({transition:'elastic',iframe:true,href:url,width:Drupal.settings.splashify.js_mode_settings.size_width,height:Drupal.settings.splashify.js_mode_settings.size_height})}else if(jsmode=='window'){window.open(url,'splash',Drupal.settings.splashify.js_mode_settings.size)}}function close_splash(){$.colorbox.close()}if(js_mode_settings.how_delay_enable==1){setTimeout(open_splash,js_mode_settings.how_delay)}else{open_splash()}if(js_mode_settings.how_autoclose_enable==1&&jsmode=='colorbox'){setTimeout(close_splash,js_mode_settings.how_autoclose)}}else if(jsmode=='redirect'){showpage()}});function showpage(){jQuery('html').show()}function hidepage(){jQuery('html').hide()};
